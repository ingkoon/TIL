# 인터넷 네트워크

----

* 인터넷 통신
* IP(Internet Protocol)
* TCP, UDP
* PORT
* DNS

## 1 인터넷 통신

클라이언트와 서버간의 통신은 그 사이에 인터넷이라 불리우는, 수 많은 복잡한 노드를 거쳐 연결이 된다.

---

## 2 IP(Internet Protocol)
각각의 클라이언트와 서버는 고유의 IP를 갖는다.
### 1. IP의 역할

*  지정한 IP에 데이터 전달
*  패킷(Packet)이라는 통신 단위로 데이터를 전달

패킷에 올라가는 정보는 **출발지 IP**, **목적지 IP**가 대표적이며 일반적인 웹은 1500byte 정도의 패킷을 전송할 수 있다. 따라서 해당 크기를 넘는 패킷은 분리되어 노드를 통해 목표 IP에 전달이 된다.

### 2. IP 프로토콜의 한계
- 비연결성
  - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
- 비신뢰성
  - 중간에 패킷이 사라지는 경우
  - 패킷이 순서대로 오지 않는 경우
- 프로그램 구분
  - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상인 경우

해당 문제를 해결하기 위해 나타난 프로토콜이 **TCP, UDP**이다.

---

## 3. TCP, UDP

인터넷 프로토콜 스택의 4계층은 다음과 같다.
- 애플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

프로토콜 계층은 다음가 같다.

|계층|사용처|
|---|---|
|애플리케이션|SOCKET 라이브러리|
|OS(운영체제)|TCP, IP|
|네트워크 인터페이스|LAN 드라이버, LAN 장비|

IP 패킷 정보는 **출발지 IP, 목적지 IP**를 갖고 있다. TCP/IP 패킷 정보는 기존의  IP패킷 정보의 취약점을 보완하기 위해 **출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보**가 추가적으로 들어간다

### 1. TCP특징
- 연결지향
  - TCP 3 way handshake(가상연결, 해당 연결은 논리적인 연결이다.)
- 데이터 전달 보증
- 순서 보장
- 신뢰성 보장

TCP 연결, TCP 3 way handshake는 다음과 같다
1. 클라이언트가 서버로 **SYN메세지**를 전달한다.
2. 서버측에서는 **SYN메시지를 수신**하고 이에 대한 답변 **ACK와 SYN메시지를 전달**한다.
3. 답변을 수신받은 클라이언트는 마찬가지로 답변인 **ACK를 서버측으로 전달**한다.
4. 이후 데이터 전송을 수행

최근에는 최적화를 통해 3번 절차를 수행하면서 동시에 데이터 전송이 수행된다.

3 way handshake를 통해 기존 IP프로토콜의 데이터 전달 보증, 순서보장 문제가 해결되었다.

### 2. UDP 특징
사용자 데이터그램 프로토콜(User Datagram Protocol)이다.
- 기능이 거의 없다
- TCP의 연결지향 기능이 없다
- 데이터 전달 보증기능 없다
- 순서 보장 기능 없다
- 위 기능들의 부재 대신 빠른 속도와 단순함을 갖고 있다.
- 기존 IP에 PORT, 체크섬(데이터 전달여부) 정도만 추가되어있다.
- 애플리케이션에서 추가 작업이 필요하다.


---

## 4. PORT 

클라이언트에서 한번에 여러개의 서버에 연결할 경우가 비일비재하다. 이때 IP는 하나이기 때문에 이를 각각의 서버와 연결을 구분지어줄 필요가 있는 **PORT**가 필요하다.

일반적으로 포트에 대한 정보는 TCP/IP 세그먼트 정보에 존하며 **출발지 PORT, 목적지 PORT**가 해당 패킷에 들어있다.

일반적으로 0번 포트서 부터 65535번 포트까지 할당이 가능하며 0 ~ 1023 포트까지는 잘 알려진 포트로 사용하지 않는 것이 좋다.
EX)
- FTP - 20, 21
- TELNET - 23
- HTTP - 80
- HTTPS - 443

---

## 5 DNS
 
IP는 기억하기가 어렵고 수시로 변경될 수 있다는 부분에서  DNS(Domain Name System)이 생겼다.
DNS서버에 도메인 명과 IP를 등록 할 경우 www.google.com과 같은 도메인 명을 입력 시 해당 도메인 명에 대응하는 IP가 연결된다.